<div class="page--data">
	{{> pageHeader title="Gaming" url="/" }}

	{{#xif pagination.page '==' 0}}
	<h3>Top 10 played games (last {{days}} days)</h3>

	<form action="/games" method="get" name="days">
		<select name="days">
			{{#each dayOptions as |option|}}
				<option
					{{#if option.selected}}selected{{/if}}
					value="{{option.value}}"
				>{{option.value}} days</option>
			{{/each}}
		</select>
		<input type="submit" value="Go" />
	</form>

	{{#if popular}}
	<table class="games-popular">
		{{#each popular as |game| }}
		<tr class="games-popular--game">
			<td class="games-popular--title">
				<a href="/game/{{game.id}}">{{game.name}}</a>
			</td>
			<td class="games-popular--meta">
				<div
					class="artist-count games-popular--bar bar-{{game.popularityPercentage}}"
					style="width: {{game.popularityPercentage}}%"
				>
					{{game.playtime_hours}} hrs
				</div>
				<div class="games-popular--stats">
					<span>last played <a href="/game-session/{{game.session_id}}">
					<strong>{{game.timeago}}</strong></a></span>

					{{#if game.achievement_percentage}}
					<span class="{{#if game.perfected}}rainbow-text{{/if}}">
						{{game.achievement_percentage}}%
						completion{{#if game.perfected}}!{{/if}}
					</span>
					{{/if}}
				</div>
			</td>
		</tr>
		{{/each}}
	</table>
	{{else}}
	<div class="error rounded-panel">
		<p class="lead">I haven't played any games within the last {{days}} days! ðŸ˜­</p>
	</div>
	{{/if}}
	{{/xif}}

	{{#each sessions as |session|}}
		{{> gameActivity data=session }}
	{{/each}}

	<hr/>

	{{> pagination pagination=pagination route="/games" }}
</div>
